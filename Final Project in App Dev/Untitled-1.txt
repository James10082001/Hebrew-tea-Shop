 <!DOCTYPE html>
 <html lang="en">
 <head>
 <meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>home</title>
 <!-- swiper css link-->
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
 <!-- font awesome cdn link-->
 <link
 rel="stylesheet"
 awesome/6.4.0/css/all.min.css">
 <!-- custom css file link-->
 <link rel="stylesheet" href="style.css">
 </head>
 <body>
 <!-- header section start-->
 <section class="header">
 <a href="home.php" class="logo">
 href="https://cdnjs.cloudflare.com/ajax/libs/font
<img src="logo.png" alt="Community Hub ">
 </a>
 <nav class="navbar">
 <a href="Home.php">Home</a>
 <a href="Business.php">Business</a>
 <a href="Admin_login.php">Admin</a>
 </nav>
</section>
<!-- header section end-->
<!-- home section starts-->
<section class="home">
<div class="swiper home-slider">
<div class="swiper-wrapper">
<div class="swiper-slide slide" style="background:url('bg 1.png') no-repeat">
<div class="content">
<span>Good, Quality, Solid Mandin</span>
<h3>Local Business in Marinduque</h3>
</div>
</div>
<div class="swiper-slide slide" style="background:url('bg 2.png') no-repeat">
<div class="content">
<span>Ngani Baya Mandin</span>
<h3>The Community Hub: Connecting Local Business and Customers</h3>
</div>
</div>
<div class="swiper-slide slide" style="background:url('bg 3.png') no-repeat">
<div class="content">
<span>Ngani Baya Mandin</span>
</div>
</div>
<div class="swiper-slide slide" style="background:url('bg4.png') no-repeat">
<div class="content">
<span>Hamos na Dine</span>
<h3>The Community Hub</h3>
</div>
</div>
<div class="swiper-slide slide" style="background:url('image/image 18.jpg') no-repeat">
    <div class="content">
        <span>Hamos na Dine</span>
        <h3></h3>
        </div>
        </div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        </div>
        </section>
        <!-- home section end-->
        <!-- swiper js link-->
        <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
        <!-- custom js file link-->
        <script src="js/script.js"></script>
        <script>
        // Initialize Swiper
        var swiper = new Swiper('.home-slider', {
        navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
        },
        autoplay: {
        delay: 2000, // Delay in milliseconds (2 seconds)
        },
        });
        </script>
        </body>
        </html>
        <?php
        require_once 'connection.php';
        $sql = "SELECT * FROM businesses";
        $all_businesses = $conn->query($sql);
        ?>
        <!DOCTYPEhtml>
        <html lang="en">
        <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>business</title>
        <!-- swiper css link-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
        <!-- font awesome cdn link-->
        <link
        rel="stylesheet"    href="https://cdnjs.cloudflare.com/ajax/libs/font
        awesome/6.4.0/css/all.min.css">
        <!-- custom css file link-->
        <link rel="stylesheet" href="style.css">
        <style>
        body {
        background-image: url('bg5.jpeg');
        background-size: cover;
        background-repeat: no-repeat;
        }
        /* Add hover effect */
        .card {
        transition: transform 0.3s ease;
        cursor: pointer;
        }
        .card:hover {
        transform: scale(1.05);
        }
        </style>
         </head>
         <body>
         <!-- header section start-->
         <section class="header">
         <a href="home.php" class="logo">
         <img src="logo.png" alt="Community Hub ">
         </a>
         <nav class="navbar">
         <a href="Home.php">Home</a>
         <a href="Business.php">Business</a>
         <a href="Admin_login.php">Admin</a>
         </nav>
         </section>
         <!-- header section end-->
         <div class="heading">
         <h1>Business</h1>
         </div>
         <main>
         <?php
         while ($row = $all_businesses->fetch_assoc()) {
         ?>
         <div class="card">
         <div class="image">
         <img src="<?php echo $row["image"]; ?>" alt="">
         </div>
         <div class="caption">
         <p class="rate">
         <i class="fa-solid fa-star"></i>
         <i class="fa-solid fa-star"></i>
         <i class="fa-solid fa-star"></i>
         <i class="fa-solid fa-star"></i>
         <i class="fa-solid fa-star"></i>
         </p>
 <p class="business_name"><?php echo $row["business_name"]; ?></p>
 <p class="contact_info"><?php echo $row["contact_info"]; ?></p>
 <p class="operating_hours"><?php echo $row["operating_hours"]; ?></p>
 <p class="address"><?php echo $row["address"]; ?></p>
 </div>
 <button
 class="add"><a
 href="review.php?image=<?php echo
 urlencode($row["image"]); ?>">Review</a></button>
 </div>
 <?php
 }
 ?>
 </main>
 <!-- swiper js link-->
 <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
 <!-- custom js file link-->
 <script src="js/script.js"></script>
 </body>
 </html>
 <?php
 session_start();
 require_once 'connection.php';
 // Admin registration
 if(isset($_POST["admin_register"])){
 $admin_username = $_POST["admin_username"];
 $admin_password = $_POST["admin_password"];
 // Check if the admin already exists
 $check_sql = "SELECT * FROM admins WHEREusername = '$admin_username'";
 $check_result = $conn->query($check_sql);
 if($check_result->num_rows > 0){
 echo "<script>alert('Admin username already exists')</script>";
 } else {
     // Insert the new admin credentials into the database
 $insert_sql = "INSERT INTO admins (username, password) VALUES ('$admin_username',
 '$admin_password')";
 if($conn->query($insert_sql) === TRUE){
 echo "<script>alert('Admin registered successfully')</script>";
 } else {
 echo "<script>alert('Error registering admin')</script>";
 }
 }
 }
 // Admin login
 if(isset($_POST["admin_login"])){
 $admin_username = $_POST["admin_username"];
 $admin_password = $_POST["admin_password"];
 // Retrieve the admin user from the database
 $admin_sql = "SELECT * FROM admins WHERE username = '$admin_username' AND
 password = '$admin_password'";
 $admin_result = $conn->query($admin_sql);
 if($admin_result->num_rows > 0){
 $_SESSION["admin_logged_in"] = true;
 header("Location: upload.php");
 exit();
 } else {
 echo "<script>alert('Invalid admin credentials')</script>";
 }
 }
 ?>
 <!DOCTYPEhtml>
 <html lang="en">
 <head>
 <meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Admin Login</title>
 <link rel="stylesheet" href="login.css">
 <link rel="stylesheet" href="style.css">
 </head>
 <!-- header section start-->
 <section class="header">
 <a href="home.php" class="logo">
 <img src="logo.png" alt="Community Hub ">
 </a>
 <nav class="navbar">
 <a href="Home.php">Home</a>
 <a href="Business.php">Business</a>
 <a href="Admin_login.php">Admin</a>
 </nav>
 </section>
 <!-- header section end-->
 <div class="heading">
 <h1>Admin</h1>
 </div>
 <body>
 <div class="login-container">
 <h1>Admin Login</h1>
 <form action="admin_login.php" method="POST">
 <input type="text" name="admin_username" placeholder="Username" required>
 <input type="password" name="admin_password" placeholder="Password" required>
 <button type="submit" name="admin_login">Login</button>
 </form>
 <h2>Register New Admin</h2>
 <form action="admin_login.php" method="POST">
 <input type="text" name="admin_username" placeholder="Username" required>
 <input type="password" name="admin_password" placeholder="Password" required>
 <button type="submit" name="admin_register">Register</button>
 </form>
 </div>
 </body>
 </html>
 <?php
 session_start();
 // Check if the admin is logged in
 if (!isset($_SESSION["admin_logged_in"]) | $_SESSION["admin_logged_in"] !== true) {
 header("Location: admin_login.php");
 exit();
 }
 require_once 'connection.php';
 if(isset($_POST["submit"])){
 $businessname = $_POST["businessname"];
 $contact_info = $_POST["contact_info"];
 $operating_hours = $_POST["operating_hours"];
 $address = $_POST["address"];
 //for uploads photo
 $upload_dir = "uploads/";
 $image = $upload_dir.$_FILES["imageUpload"]["name"];
 $upload_dir.$_FILES["imageUpload"]["name"];
 $upload_file = $upload_dir.basename($_FILES["imageUpload"]["name"]);
 $imageType = strtolower(pathinfo($upload_file,PATHINFO_EXTENSION));
 $check = $_FILES["imageUpload"]["size"];
 $upload_ok = 0;
 if(file_exists($upload_file)){
 echo "<script>alert('The file already exist')</script>";
 $upload_ok = 0;
 }else{
 $upload_ok = 1;
 if($check !== false){
 $upload_ok = 1;
 if($imageType == 'jpg' | $imageType == 'png' | $imageType == 'jpeg' | $imageType ==
 'gif'){
 $upload_ok = 1;
 }else{
 echo '<script>alert("please change the image format")</script>';
 }
 }else{
 echo '<script>alert("The photo size is 0 please change the photo")</script>';
 $upload_ok = 0;
}
}
if($upload_ok == 0){
echo '<script>alert("sorry your file is does not uploaded. Please try again")</script>';
}else{
if($businessname != "" && $contact_info !=""){
move_uploaded_file($_FILES["imageUpload"]["tmp_name"],$upload_file);
$sqli
=
"INSERT
businesses(business_name,contact_info,operating_hours,address,image)
VALUES('$businessname','$contact_info','$operating_hours','$address','$image')";
if($conn->query($sqli) === TRUE){
echo "<script>alert('your business uploaded successfully')</script>";
}
}
}
}
?>
<!DOCTYPEhtml>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>admin</title>
<link rel="stylesheet" href="upload.css">
<!-- swiper css link-->
INTO
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
<!-- font awesome cdn link-->
<link
rel="stylesheet"
awesome/6.4.0/css/all.min.css">
<!-- custom css file link-->
<link rel="stylesheet" href="style.css">
<style>
body {
background-image: url('bg6.jpg');
background-size: cover;
background-repeat: no-repeat;
 }
 </style>
 </head>
 <body>
 <!-- header section start-->
 <section class="header">
 <a href="home.php" class="logo">
 <img src="logo.png" alt="Community Hub ">
 </a>
 <nav class="navbar">
 <a href="Home.php">Home</a>
 <a href="Business.php">Business</a>
 <a href="Admin_login.php">Admin</a>
 </nav>
 </section>
 <!-- header section end-->
 <div class="heading" style="background:url(header-bg 1.png) no-repeat">
 <h1>Upload</h1>
 </div>
 <section id="upload_container">
 <form action="upload.php" method="POST" enctype="multipart/form-data">
 <input type="text" name="businessname" id="businessname" placeholder="Business
 Name" required>
 <input type="number" name="contact_info" id="contact_info" placeholder="Contact Info"
 required>
 <input type="text" name="operating_hours" id="operating_hours" placeholder="Operating
 Hours" required>
 <input type="text" name="address" id="address" placeholder="Address" required>
 <input type="file" name="imageUpload" id="imageUpload" required hidden>
 <button id="choose" onclick="upload();">Choose image</button>
 <input type="submit" value="Upload" name="submit">
 </form>
 </section>
 <script>
     var businessname = document.getElementById("businessname");
 var contact_info = document.getElementById("contact_info");
 var operating_hours = document.getElementById("operating_hours");
 var address = document.getElementById("address");
 var choose = document.getElementById("choose");
 var uploadImage = document.getElementById("imageUpload");
 function upload(){
 uploadImage.click();
 }
 uploadImage.addEventListener("change", function(){
 var file = this.files[0];
 if(businessname.value == ""){
 businessname.value = file.name;
 }
 choose.innerHTML = "You can change("+file.name+") picture";
 })
 </script>
 <!-- swiper js link-->
 <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
 <!-- custom js file link-->
 <script src="js/script.js"></script>
 </body>
 </html>
 <!DOCTYPE HTML>
 <html>
 <head>
 <meta charset="utf-8" />
 <title>Review & Rating System</title>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
 <link rel="stylesheet"
 href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384- Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
 crossorigin="anonymous">
 <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
 integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
 crossorigin="anonymous"/>
 <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256
/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
 integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
 crossorigin="anonymous"></script>
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
 integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
 crossorigin="anonymous"></script>
 <style>
 .progress-label-left {
 float: left;
 margin-right: 0.5em;
 line-height: 1em;
 }
 .progress-label-right {
 float: right;
 margin-left: 0.3em;
 line-height: 1em;
 }
 .star-light {
 color: #e9ecef;
 }
 </style>
  </head>
 <body>
 <div class="container">
 <h1 class="mt-5 mb-5">Review & Rating System</h1>
 <div class="card">
 <?php
 // Retrieve the image para meter from the URL
 $image = $_GET['image'];
 // Decode the URL-encoded image parameter
 $image = urldecode($image);
 // Display the image
 echo '<img src="' . $image . '" alt="Business Image" class="img-fluid mb-4" id="image" />';
 ?>
 <div class="card-body">
 <div class="row">
 <div class="col-sm-4 text-center">
 <h1 class="text-warning mt-4 mb-4">
 <b><span id="average_rating">0.0</span> / 5</b>
 </h1>
 <div class="mb-3">
 <?php
  // Display 5 empty stars
  for ($i = 0; $i < 5; $i++) {
    echo '<i class="fas fa-star star-light"></i>';
    }
    ?>
    </div>
    <h6 class="text-muted">Average Rating</h6>
    </div>
    <div class="col-sm-8">
    <h6 class="text-muted mt-4">Individual Ratings:</h6>
    <div class="progress mb-3">
    <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria
   valuemin="0" aria-valuemax="100">
    <span class="progress-label-left">5 stars</span>
    <span class="progress-label-right">0%</span>
    </div>
    </div>
    <div class="progress mb-3">
    <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria
   valuemin="0" aria-valuemax="100">
    <span class="progress-label-left">4 stars</span>
    <span class="progress-label-right">0%</span>
    </div>
    </div>
    <div class="progress mb-3">
    <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria
valuemin="0" aria-valuemax="100">
 <span class="progress-label-left">3 stars</span>
 <span class="progress-label-right">0%</span>
 </div>
 </div>
 <div class="progress mb-3">
 <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria
valuemin="0" aria-valuemax="100">
 <span class="progress-label-left">2 stars</span>
 <span class="progress-label-right">0%</span>
 </div>
 </div>
 <div class="progress mb-3">
 <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria
valuemin="0" aria-valuemax="100">
 <span class="progress-label-left">1 star</span>
 <span class="progress-label-right">0%</span>
 </div>
 </div>
 </div>
 </div>
 <hr />
 <h6 class="text-muted mt-4">Recent Reviews:</h6>
 <ul class="list-unstyled mb-0" id="reviews_list">
 </ul>
 <form id="review_form" class="mt-4">
 <h6 class="text-muted">Submit Your Review:</h6>
 <div class="form-group">
 <label for="username">Username:</label>
 <input type="text" class="form-control" id="username" name="username" required>
 </div>
 <div class="form-group">
 <label for="rating">Rating:</label>
 <select class="form-control" id="rating" name="rating">
 <option value="1">1 star</option>
 <option value="2">2 stars</option>
 <option value="3">3 stars</option>
 <option value="4">4 stars</option>
 <option value="5">5 stars</option>
 </select>
 </div>
 <div class="form-group">
 <label for="comment">Comment:</label>
 <textarea class="form-control" id="comment" name="comment" rows="3"></textarea>
 </div>
 <button type="submit" class="btn btn-primary">Submit Review</button>
 </form>
 </div>
 </div>
 </div>
 <script>
 $(document).ready(function() {
 // Calculate and update average rating based on individual ratings
 function updateAverageRating() {
 var sum = 0;
 var count = 0;
 $('.individual-rating').each(function() {
 sum+=parseFloat($(this).text());
 count++;
 });
 var averageRating = (count > 0) ? (sum / count).toFixed(1) : 0.0;
 $('#average_rating').text(averageRating);
 }
 // Update the progress bar for each rating level
 function updateProgressBar(rating, percentage) {
 $('.progress-bar[data-rating="' + rating + '"]').css('width', percentage + '%');
 $('.progress-bar[data-rating="' + rating + '"]').attr('aria-valuenow', percentage);
 $('.progress-bar[data-rating="' + rating + '"]').find('.progress-label-right').text(percentage + '%');
 }
 // Update individual ratings and progress bars
 function updateRatings() {
 $('.review-item').each(function() {
    var rating = $(this).find('.individual-rating').text();
 var percentage = $(this).find('.individual-rating-percentage').text();
 updateProgressBar(rating, percentage);
 });
 }
 // Load initial ratings and reviews
 function loadRatingsAndReviews() {
 // Simulating the initial data
 var ratingsAndReviews = [
 { username: 'John Doe', rating: '5', comment: 'Great product!', timestamp: '2023-05-28
 10:00:00' },
 { username: 'Jane Smith', rating: '4', comment: 'Good quality.', timestamp: '2023-05-27
 12:30:00' },
 { username: 'David Johnson', rating: '3', comment: 'Average product.', timestamp: '2023-05
26 15:45:00' }
 ];
 // Clear the existing reviews list
 $('#reviews_list').empty();
 // Iterate through ratings and reviews and append them to the list
 for (var i = 0; i < ratingsAndReviews.length; i++) {
 var username = ratingsAndReviews[i].username;
 var rating = ratingsAndReviews[i].rating;
 var comment =ratingsAndReviews[i].comment;
 var timestamp = ratingsAndReviews[i].timestamp;
 var listItem = $('<li class="review-item mb-3"></li>');
 var ratingSpan = $('<span class="individual-rating">' + rating + '</span>');
 var percentageSpan = $('<span class="individual-rating-percentage">0%</span>');
 var commentSpan = $('<span class="individual-comment">' + comment + '</span>');
 var timestampSpan = $('<span class="text-muted">- ' + timestamp + '</span>');
 listItem.append(ratingSpan);
 listItem.append(percentageSpan);
 listItem.append(commentSpan);
 listItem.append(timestampSpan);
 $('#reviews_list').append(listItem);
 }
 updateAverageRating();
 updateRatings();
 }
 // Handle form submission
 $('#review_form').submit(function(event) {
 event.preventDefault();
 var username = $('#username').val();
 var rating = $('#rating').val();
 var comment = $('#comment').val();
  // Simulating the submission process
  var newReview = {
 username: username,
 rating: rating,
 comment: comment,
 timestamp: '2023-05-29 11:30:00'
 };
 // Clear form fields
 $('#username').val('');
 $('#rating').val('1');
 $('#comment').val('');
 // Update the ratings and reviews list
 var listItem = $('<li class="review-item mb-3"></li>');
 var ratingSpan = $('<span class="individual-rating">' + newReview.rating + '</span>');
 var percentageSpan = $('<span class="individual-rating-percentage">0%</span>');
 var commentSpan = $('<span class="individual-comment">' + newReview.comment + '</span>');
 var timestampSpan = $('<span class="text-muted">- ' + newReview.timestamp + '</span>');
 listItem.append(ratingSpan);
 listItem.append(percentageSpan);
 listItem.append(commentSpan);
 listItem.append(timestampSpan);
 $('#reviews_list').prepend(listItem);
 updateAverageRating();
 updateRatings();
 });
 // Load initial ratings and reviews
 loadRatingsAndReviews();
 });
 </script>
 </body>
 </html>
 
 <?php
 //lets make a connection with business database
 $servername = "localhost";
 $username = "";
 $password = "";
 $db_name ="business";
 $conn = newmysqli($servername,$username,$password,$db_name);
 ?>
<?php
 require_once 'connection.php';
 $connect = mysqli_connect("localhost", "root", "", "testing");
 if(isset($_POST["rating_data"]))
 {
 $user_name = mysqli_real_escape_string($connect, $_POST["user_name"]);
 $user_rating = $_POST["rating_data"];
 $user_review = mysqli_real_escape_string($connect, $_POST["user_review"]);
 $datetime = time();
 $query = "
 INSERT INTO review_table
 (user_name, user_rating, user_review, datetime)
 VALUES('$user_name', '$user_rating', '$user_review', '$datetime')
 ";
 if(mysqli_query($connect, $query))
 {
 echo "Your Review & Rating Successfully Submitted";
 }
 }
 mysqli_close($connect);
 ?>
 